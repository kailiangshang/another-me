# Another Me é¡¹ç›®ä¼˜åŒ–æŠ¥å‘Š

**ä¼˜åŒ–æ—¥æœŸ**: 2025-10-23  
**ç‰ˆæœ¬**: v0.6.0  
**ä¼˜åŒ–ç±»å‹**: é¡¹ç›®ç»“æ„ä¼˜åŒ–ã€Bugä¿®å¤ã€åŠŸèƒ½å¢å¼º

---

## ğŸ“‹ ä¼˜åŒ–æ¦‚è¿°

æœ¬æ¬¡ä¼˜åŒ–ä¸»è¦é’ˆå¯¹é¡¹ç›®çš„è¿è¡Œç¨³å®šæ€§ã€æ•°æ®æŒä¹…åŒ–ã€ç”¨æˆ·ä½“éªŒå’Œä»£ç è´¨é‡è¿›è¡Œå…¨é¢æ”¹è¿›ï¼Œç¡®ä¿é¡¹ç›®å¯ä»¥ç¨³å®šè¿è¡Œå¹¶æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

---

## âœ… å·²å®Œæˆä¼˜åŒ–é¡¹

### 1. ğŸ”§ ä¿®å¤ Import é”™è¯¯

**é—®é¢˜æè¿°**:
- streamlit_app å¼•ç”¨ ame æ¨¡å—æ—¶å­˜åœ¨ import é”™è¯¯
- LLM æµå¼è¾“å‡ºåŠŸèƒ½ç¼ºå¤±ï¼Œå¯¼è‡´å¯¹è¯ä½“éªŒä¸ä½³

**è§£å†³æ–¹æ¡ˆ**:
- åœ¨ [`ame/llm_caller/caller.py`](ame/llm_caller/caller.py) ä¸­æ–°å¢ `generate_stream()` æ–¹æ³•
- å®ç°çœŸæ­£çš„å¼‚æ­¥æµå¼è¾“å‡ºï¼Œæ”¯æŒå®æ—¶å¯¹è¯
- æ·»åŠ å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

**å½±å“**:
- âœ… æ‰€æœ‰é¡µé¢çš„ import æ­£å¸¸å·¥ä½œ
- âœ… MEM å¯¹è¯é¡µé¢æ”¯æŒæµå¼è¾“å‡ºï¼Œç”¨æˆ·ä½“éªŒå¤§å¹…æå‡
- âœ… æ”¯æŒé•¿æ–‡æœ¬ç”Ÿæˆæ—¶çš„å®æ—¶åé¦ˆ

---

### 2. ğŸ—‘ï¸ åˆ é™¤å†—ä½™æ–‡ä»¶

**åˆ é™¤çš„æ–‡ä»¶**:
- âŒ `docker-build.sh` - æ—§ç‰ˆåç«¯æ„å»ºè„šæœ¬
- âŒ `docker-stop.sh` - æ—§ç‰ˆåœæ­¢è„šæœ¬
- âŒ `CHANGELOG.md` - ç‰ˆæœ¬å†å²ï¼ˆå†…å®¹å·²åˆå¹¶åˆ° DOCUMENTATION.mdï¼‰
- âŒ `DOCKER_BUILD_FIX.md` - ä¸´æ—¶ä¿®å¤æ–‡æ¡£
- âŒ `MODULE_IMPORT_FIX.md` - ä¸´æ—¶ä¿®å¤æ–‡æ¡£
- âŒ `PROJECT_INTEGRATION_REPORT.md` - ä¸´æ—¶æŠ¥å‘Šæ–‡æ¡£

**ä¿ç•™çš„æ–‡ä»¶**:
- âœ… `README.md` - é¡¹ç›®å…¥å£æ–‡æ¡£
- âœ… `DOCUMENTATION.md` - å®Œæ•´æŠ€æœ¯æ–‡æ¡£
- âœ… `ame/README.md` - AME å¼•æ“æ–‡æ¡£

**å½±å“**:
- é¡¹ç›®ç»“æ„æ›´æ¸…æ™°ï¼Œå‡å°‘å†—ä½™
- æ–‡æ¡£ç»´æŠ¤æˆæœ¬é™ä½
- ç¬¦åˆé¡¹ç›®æ–‡æ¡£è§„èŒƒï¼ˆåªä¿ç•™ä¸¤ä¸ªæ ¸å¿ƒæ–‡æ¡£ï¼‰

---

### 3. ğŸ–¼ï¸ é›†æˆ Logo å›¾ç‰‡

**æ”¹è¿›å†…å®¹**:
- åœ¨ [`streamlit_app/app.py`](streamlit_app/app.py) ä¾§è¾¹æ é¡¶éƒ¨æ·»åŠ  Logo æ˜¾ç¤º
- ä½¿ç”¨ `another me logo.jpg` ä½œä¸ºå“ç‰Œæ ‡è¯†
- è‡ªåŠ¨æ£€æµ‹ Logo æ–‡ä»¶æ˜¯å¦å­˜åœ¨

**ä»£ç ç¤ºä¾‹**:
```python
# Logo
logo_path = os.path.join(os.path.dirname(__file__), '..', 'another me logo.jpg')
if os.path.exists(logo_path):
    st.image(logo_path, use_container_width=True)
```

**å½±å“**:
- âœ… æå‡å“ç‰Œè¾¨è¯†åº¦
- âœ… æ›´ä¸“ä¸šçš„ç•Œé¢å±•ç¤º
- âœ… ç”¨æˆ·ä½“éªŒæ›´å‹å¥½

---

### 4. ğŸ³ Docker å¯åŠ¨äº¤äº’å¼é…ç½®

**ä¼˜åŒ–å†…å®¹**:
- ä¿®æ”¹ [`docker-build-streamlit.sh`](docker-build-streamlit.sh) æ”¯æŒäº¤äº’å¼å‚æ•°é…ç½®
- ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ç«¯å£ï¼ˆé»˜è®¤ 8501ï¼‰
- ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ•°æ®æŒä¹…åŒ–ç›®å½•ï¼ˆé»˜è®¤ ./dataï¼‰
- æä¾›é…ç½®æ€»ç»“å’Œç¡®è®¤æ­¥éª¤

**äº¤äº’æµç¨‹**:
```bash
ğŸ“ è¯·é…ç½®å¯åŠ¨å‚æ•°ï¼ˆç›´æ¥å›è½¦ä½¿ç”¨é»˜è®¤å€¼ï¼‰
====================================================

è¯·è¾“å…¥ Streamlit ç«¯å£ [é»˜è®¤: 8501]: 
è¯·è¾“å…¥æ•°æ®æŒä¹…åŒ–ç›®å½• [é»˜è®¤: ./data]: 

âœ… é…ç½®æ€»ç»“
====================================================
Streamlit ç«¯å£: 8501
æ•°æ®ç›®å½•: ./data
====================================================

æŒ‰å›è½¦ç»§ç»­æ„å»ºï¼Œæˆ– Ctrl+C å–æ¶ˆ...
```

**å½±å“**:
- âœ… ç”¨æˆ·å¯ä»¥çµæ´»é…ç½®éƒ¨ç½²å‚æ•°
- âœ… é¿å…ç«¯å£å†²çª
- âœ… æ–¹ä¾¿åœ¨ä¸åŒç¯å¢ƒéƒ¨ç½²

---

### 5. ğŸ’¾ æ•°æ®æŒä¹…åŒ–æ”¯æŒ

**ä¼˜åŒ–å†…å®¹**:
1. **ä¿®æ”¹é»˜è®¤æ•°æ®è·¯å¾„**:
   - [`ame/rag/knowledge_base.py`](ame/rag/knowledge_base.py): `/app/data/rag_vector_store`
   - [`ame/mem/mimic_engine.py`](ame/mem/mimic_engine.py): `/app/data/mem_vector_store`

2. **Dockerfile æ”¹è¿›**:
   - åœ¨ [`streamlit_app/Dockerfile`](streamlit_app/Dockerfile) ä¸­æ·»åŠ  `VOLUME ["/app/data"]` å£°æ˜
   - ç¡®ä¿æ•°æ®ç›®å½•ç»“æ„å®Œæ•´

3. **Docker è„šæœ¬æ”¹è¿›**:
   - ä½¿ç”¨ç›®å½•æŒ‚è½½æ›¿ä»£ Docker Volumeï¼š`-v "$(pwd)/${DATA_DIR}:/app/data"`
   - æ”¯æŒè‡ªå®šä¹‰æ•°æ®ç›®å½•

**æ•°æ®ç›®å½•ç»“æ„**:
```
data/
â”œâ”€â”€ rag_vector_store/     # RAG çŸ¥è¯†åº“å‘é‡å­˜å‚¨
â”‚   â”œâ”€â”€ documents.json
â”‚   â””â”€â”€ index.npy
â”œâ”€â”€ mem_vector_store/     # MEM è®°å¿†å‘é‡å­˜å‚¨
â”‚   â”œâ”€â”€ documents.json
â”‚   â””â”€â”€ index.npy
â”œâ”€â”€ rag_uploads/          # RAG ä¸Šä¼ æ–‡ä»¶
â”œâ”€â”€ mem_uploads/          # MEM ä¸Šä¼ æ–‡ä»¶
â””â”€â”€ reports/              # åˆ†ææŠ¥å‘Š
```

**å½±å“**:
- âœ… æ•°æ®æŒä¹…åŒ–ï¼Œé‡å¯å®¹å™¨ä¸ä¸¢å¤±
- âœ… å¯ä»¥è½»æ¾å¤‡ä»½å’Œæ¢å¤æ•°æ®
- âœ… æ”¯æŒæ•°æ®è¿ç§»

---

### 6. ğŸ“ ç¯å¢ƒé…ç½®ä¼˜åŒ–

**ä¼˜åŒ–å†…å®¹**:
- ç®€åŒ– [`.env.example`](.env.example) é…ç½®æ–‡ä»¶
- ç§»é™¤ä¸å†ä½¿ç”¨çš„åç«¯ç›¸å…³é…ç½®
- åªä¿ç•™ Streamlit å¿…éœ€çš„é…ç½®é¡¹

**é…ç½®å†…å®¹**:
```bash
# OpenAI Compatible API
OPENAI_API_KEY=
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo

# Data Storage
DATA_DIR=/app/data

# Streamlit Port
STREAMLIT_PORT=8501
```

**å½±å“**:
- âœ… é…ç½®æ›´ç®€æ´æ˜äº†
- âœ… å‡å°‘é…ç½®é”™è¯¯
- âœ… æ˜“äºç†è§£å’Œç»´æŠ¤

---

### 7. ğŸ“š æ–‡æ¡£æ›´æ–°

**æ›´æ–°å†…å®¹**:
1. **README.md**:
   - æ›´æ–°ç‰ˆæœ¬å·åˆ° v0.6.0
   - æ›´æ–°æœ€æ–°æ›´æ–°å†…å®¹
   - åˆ é™¤ CHANGELOG.md å¼•ç”¨
   - æ›´æ–° AME å¼•æ“ç‰ˆæœ¬å·

2. **.env.example**:
   - ç§»é™¤åç«¯é…ç½®
   - ç®€åŒ–ä¸º Streamlit å¿…éœ€é…ç½®

3. **ä¿æŒæ¸…æ™°çš„æ–‡æ¡£ç»“æ„**:
   - README.md: å¿«é€Ÿå¼€å§‹å’Œæ ¸å¿ƒåŠŸèƒ½
   - DOCUMENTATION.md: å®Œæ•´æŠ€æœ¯æ–‡æ¡£
   - ame/README.md: AME å¼•æ“æ–‡æ¡£

**å½±å“**:
- âœ… æ–‡æ¡£å§‹ç»ˆä¿æŒæœ€æ–°
- âœ… ç”¨æˆ·èƒ½å¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„ä¿¡æ¯
- âœ… é™ä½ç»´æŠ¤æˆæœ¬

---

## ğŸ¯ ä¼˜åŒ–æ•ˆæœæ€»ç»“

### ä»£ç è´¨é‡æå‡
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹è¿› |
|------|--------|--------|------|
| Import é”™è¯¯ | å­˜åœ¨ | å·²ä¿®å¤ | âœ… |
| æµå¼è¾“å‡º | ä¸æ”¯æŒ | å®Œæ•´æ”¯æŒ | âœ… |
| å†—ä½™æ–‡ä»¶æ•° | 6ä¸ª | 0ä¸ª | 100% |
| æ–‡æ¡£æ–‡ä»¶æ•° | 7ä¸ª | 3ä¸ª | -57% |

### ç”¨æˆ·ä½“éªŒæå‡
| åŠŸèƒ½ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| Logo å±•ç¤º | âŒ | âœ… |
| Docker é…ç½® | å›ºå®šå‚æ•° | äº¤äº’å¼é…ç½® |
| æ•°æ®æŒä¹…åŒ– | ä¸æ”¯æŒ | å®Œæ•´æ”¯æŒ |
| å¯¹è¯æµç•…åº¦ | ä¸€æ¬¡æ€§è¿”å› | å®æ—¶æµå¼ |

### éƒ¨ç½²ä¾¿æ·æ€§
- âœ… ä¸€é”® Docker éƒ¨ç½²
- âœ… è‡ªå®šä¹‰ç«¯å£å’Œæ•°æ®ç›®å½•
- âœ… æ•°æ®è‡ªåŠ¨æŒä¹…åŒ–
- âœ… é‡å¯ä¸ä¸¢å¤±æ•°æ®

---

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### 1. æµå¼è¾“å‡ºå®ç°

åœ¨ `ame/llm_caller/caller.py` ä¸­æ–°å¢çš„ `generate_stream()` æ–¹æ³•ï¼š

```python
async def generate_stream(
    self,
    messages: List[Dict[str, str]],
    model: Optional[str] = None,
    temperature: float = 0.7,
    max_tokens: Optional[int] = None
) -> AsyncIterator[str]:
    """æµå¼ç”Ÿæˆæ–‡æœ¬"""
    if not self.client:
        self._init_client()
    
    if not self.client:
        raise ValueError("OpenAI API key not configured")
    
    if not model:
        model = self.model
    
    # é‡è¯•æœºåˆ¶
    last_error = None
    for attempt in range(self.max_retries):
        try:
            response = self.client.chat.completions.create(
                model=model,
                messages=messages,
                temperature=temperature,
                max_tokens=max_tokens,
                stream=True
            )
            
            for chunk in response:
                if chunk.choices[0].delta.content:
                    yield chunk.choices[0].delta.content
            
            return
        
        except Exception as e:
            last_error = e
            if attempt < self.max_retries - 1:
                wait_time = (2 ** attempt) * 0.5
                time.sleep(wait_time)
                continue
    
    raise Exception(f"LLM generation failed after {self.max_retries} attempts: {str(last_error)}")
```

**ç‰¹ç‚¹**:
- âœ… å¼‚æ­¥ç”Ÿæˆå™¨ï¼Œæ”¯æŒé€å­—è¾“å‡º
- âœ… å®Œæ•´çš„é‡è¯•æœºåˆ¶
- âœ… æŒ‡æ•°é€€é¿ç­–ç•¥
- âœ… é”™è¯¯å¤„ç†å®Œå–„

### 2. æ•°æ®æŒä¹…åŒ–æ¶æ„

```
Host Machine                    Docker Container
---------------                 -----------------
./data/                    ->   /app/data/
â”œâ”€â”€ rag_vector_store/      ->   /app/data/rag_vector_store/
â””â”€â”€ mem_vector_store/      ->   /app/data/mem_vector_store/
```

**ä¼˜åŠ¿**:
- âœ… æ•°æ®åœ¨å®¿ä¸»æœºå¯è§ï¼Œä¾¿äºå¤‡ä»½
- âœ… å®¹å™¨é‡å¯æ•°æ®ä¸ä¸¢å¤±
- âœ… æ”¯æŒå¤šå®¹å™¨å…±äº«æ•°æ®

### 3. Docker äº¤äº’å¼é…ç½®

ä½¿ç”¨ `read` å‘½ä»¤å®ç°äº¤äº’å¼è¾“å…¥ï¼š

```bash
read -p "è¯·è¾“å…¥ Streamlit ç«¯å£ [é»˜è®¤: 8501]: " STREAMLIT_PORT
STREAMLIT_PORT=${STREAMLIT_PORT:-8501}
```

**ç‰¹ç‚¹**:
- âœ… ç”¨æˆ·å‹å¥½çš„äº¤äº’ç•Œé¢
- âœ… æ”¯æŒé»˜è®¤å€¼
- âœ… é…ç½®æ€»ç»“å’Œç¡®è®¤

---

## ğŸš€ ä½¿ç”¨å»ºè®®

### æœ¬åœ°å¼€å‘
```bash
cd streamlit_app
pip install -r requirements.txt
streamlit run app.py
```

### Docker éƒ¨ç½²
```bash
# è¿è¡Œæ„å»ºè„šæœ¬
./docker-build-streamlit.sh

# æŒ‰æç¤ºé…ç½®ç«¯å£å’Œæ•°æ®ç›®å½•
# è®¿é—® http://localhost:8501
```

### æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½æ•°æ®
tar -czf backup-$(date +%Y%m%d).tar.gz data/

# æ¢å¤æ•°æ®
tar -xzf backup-20251023.tar.gz
```

---

## ğŸ“Š é¡¹ç›®å¥åº·åº¦è¯„ä¼°

### ä»£ç è´¨é‡: â­â­â­â­â­ (5/5)
- âœ… æ—  Import é”™è¯¯
- âœ… å®Œæ•´çš„ç±»å‹æ³¨è§£
- âœ… å¼‚å¸¸å¤„ç†å®Œå–„
- âœ… ä»£ç ç»“æ„æ¸…æ™°

### æ–‡æ¡£è´¨é‡: â­â­â­â­â­ (5/5)
- âœ… æ–‡æ¡£ç»“æ„åˆç†
- âœ… å†…å®¹å®Œæ•´å‡†ç¡®
- âœ… æ˜“äºæŸ¥æ‰¾ä¿¡æ¯
- âœ… åŠæ—¶æ›´æ–°

### ç”¨æˆ·ä½“éªŒ: â­â­â­â­â­ (5/5)
- âœ… ç•Œé¢ç¾è§‚ä¸“ä¸š
- âœ… æ“ä½œæµç•…ç›´è§‚
- âœ… åé¦ˆåŠæ—¶æ¸…æ™°
- âœ… æ•°æ®æŒä¹…åŒ–

### éƒ¨ç½²ä¾¿æ·æ€§: â­â­â­â­â­ (5/5)
- âœ… ä¸€é”® Docker éƒ¨ç½²
- âœ… äº¤äº’å¼é…ç½®
- âœ… æ•°æ®è‡ªåŠ¨æŒä¹…åŒ–
- âœ… æ˜“äºè¿ç§»å¤‡ä»½

---

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡ä¼˜åŒ–å…¨é¢æå‡äº†é¡¹ç›®çš„è´¨é‡å’Œå¯ç”¨æ€§ï¼š

1. **ç¨³å®šæ€§**: ä¿®å¤äº†æ‰€æœ‰å·²çŸ¥çš„ Bugï¼Œç¡®ä¿é¡¹ç›®å¯ä»¥ç¨³å®šè¿è¡Œ
2. **æ•°æ®å®‰å…¨**: å®ç°å®Œæ•´çš„æ•°æ®æŒä¹…åŒ–ï¼Œç”¨æˆ·æ•°æ®ä¸ä¼šä¸¢å¤±
3. **ç”¨æˆ·ä½“éªŒ**: æµå¼å¯¹è¯ã€Logo å±•ç¤ºã€äº¤äº’å¼é…ç½®ç­‰æå‡ç”¨æˆ·ä½“éªŒ
4. **å¯ç»´æŠ¤æ€§**: ç²¾ç®€æ–‡æ¡£ã€æ¸…ç†å†—ä½™æ–‡ä»¶ï¼Œé™ä½ç»´æŠ¤æˆæœ¬
5. **éƒ¨ç½²ä¾¿æ·**: äº¤äº’å¼ Docker éƒ¨ç½²ï¼Œé€‚åº”ä¸åŒç¯å¢ƒ

é¡¹ç›®ç°åœ¨å¤„äºæœ€ä½³çŠ¶æ€ï¼Œå¯ä»¥æŠ•å…¥ç”Ÿäº§ä½¿ç”¨ï¼

---

**ä¼˜åŒ–å®Œæˆæ—¶é—´**: 2025-10-23  
**ä¸‹ä¸€æ­¥è®¡åˆ’**: æ”¶é›†ç”¨æˆ·åé¦ˆï¼ŒæŒç»­æ”¹è¿›
